<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">

{%- include head.html -%}

<body>

{%- include header.html -%}

<!-- Flex container to hold sidebar and main content -->
<div class="content-container">
  <aside class="sidebar">
    <h2>Quick Navigation</h2>
    <ul>
      {% for item in site.sidebar %}
      <li>
        <a href="{{ item.url }}">{{ item.title }}</a>
        {% if item.toc %}
        <button onclick="toggleTOC('{{ item.title | replace: ' ', '-' }}')">Details</button>
        <div id="toc-{{ item.title | replace: ' ', '-' }}" class="toc-content hidden">
          <ul>  <!-- Add this UL here -->
            {% assign headings = site.pages | where: "path", item.url | first %}
            {% if headings %}
            {% for heading in headings.content | split: '## ' %}
            {% if heading != '' %}
            {% assign parts = heading | split: '\n' %}
            <li><a href="#{{ parts[0] | slugify }}">{{ parts[0] }}</a></li>
            {% endif %}
            {% endfor %}
            {% endif %}
          </ul>
        </div>
        {% endif %}
      </li>
      {% endfor %}
    </ul>
  </aside>

  <main class="page-content" aria-label="Content">
    <div class="wrapper">
      {{ content }}
    </div>
  </main>
</div>

<script>
  function toggleTOC(id) {
    const toc = document.getElementById('toc-' + id);
    toc.classList.toggle('hidden');
  }
</script>

<style>
  /* Flex container for sidebar and main content */
  .content-container {
    display: flex;
  }

  /* Sidebar styling */
  .sidebar {
    position: fixed; /* Fix the sidebar position */
    top: 0;         /* Align it to the top of the viewport */
    left: 0;        /* Align it to the left */
    width: 250px;  /* Set width of the sidebar */
    height: 100vh; /* Full height of the viewport */
    overflow-y: auto; /* Allow scrolling if content exceeds height */
    background-color: #f8f9fa; /* Optional: Background color */
    padding: 15px; /* Optional: Padding for aesthetics */
    border-right: 1px solid #ccc; /* Optional: Border for separation */
  }

  /* Main content styling */
  .page-content {
    flex: 1; /* Take up remaining space */
    padding: 20px;
  }

  /* Style for hidden class */
  .hidden {
    display: none;
  }
</style>

</body>
</html>
